<!DOCTYPE html>
<html>
<head>
    <style>
        .rnb {
            width: 100%;
            height: 100vh;
            transition: opacity 1s;
    
        }
        #settings{
            margin: 50px;               
        }
        body{
            margin: 0;
            overflow: hidden;
            display: flex;
            flex-wrap: wrap;
        }
        .valueChange{
            width: 500px;
        }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">

</head>
<body>

    <div class="rnb"></div>


    <script type="text/javascript">
        var rnb = document.querySelectorAll('.rnb')   
        var valueX = 490
        var valueY = 1530 
        var x,y          
        rnb.forEach(item=>{
        item.style.backgroundImage = getColorCode(valueX,valueY)                          
        })
        
        rnb.forEach((item)=>{
            item.addEventListener("mousemove", e => handleMouseMovement(e))
            item.addEventListener("touchmove", e => handleTouchMovement(e))
            
        
            function handleMouseMovement(e){
                var rect              
                rect = item.getBoundingClientRect()           
                valueX -= ((1530*e.movementX)/rect.width)
                valueY -= ((1530*e.movementY)/rect.height)                  
                item.style.backgroundImage = getColorCode(valueX,valueY)
                console.log(getColorCode(valueX,valueY))
            }

            function handleTouchMovement(e){
                var rect, diffX, diffY               
                rect = item.getBoundingClientRect()
                if (x||y){
                    diffX -= x
                    diffY -= y
                    x = e.touches[0].clientX - rect.left
                    y = e.touches[0].clientY - rect.top
                    var valueX = (1530*x)/rect.width
                    var valueY = (1530*y)/rect.height
                    item.style.backgroundImage = getColorCode(valueX,valueY)
                } else {
                    x = e.touches[0].clientX - rect.left
                    y = e.touches[0].clientY - rect.top
                }
                                    
            }
        })

        function getColorCode (valueX,valueY) {
            return "conic-gradient("+calculateColor(valueX)+", "+calculateColor(valueY)+", "+calculateColor(valueX+(valueX/6))+", "+calculateColor(valueY+(valueY/6))+", "+calculateColor(valueX+(valueX/3))+", "+calculateColor(valueY+(valueY/3))+", "+calculateColor(valueX)+")"
        }

        function calculateColor(value){
            var r, g, b
            if (value<0){value=value+(value*(-1))}
            var section = Math.floor((value%1530)/(1530/6))
            var withinSection = Math.floor(255*((value%1530)/(1530/6)-Math.floor((value%1530)/((1530/6)))))
            switch (section) {
                case 0: 
                    r = 255
                    g = withinSection
                    b = 0
                    break;
                case 1:
                    r = 255-withinSection
                    g = 255
                    b = 0
                    break;
                case 2:
                    r = 0
                    g = 255
                    b = withinSection
                    break;
                case 3:
                    r = 0
                    g = 255-withinSection
                    b = 255
                    break;
                case 4:
                    r = withinSection
                    g = 0
                    b = 255
                    break; 
                case 5:
                    r = 255
                    g = 0
                    b = 255-withinSection
                    break;    
            }
            
            return 'rgba('+r+', '+g+', '+b+',0.7)' 
        }
    
    </script>
</body>
</html>