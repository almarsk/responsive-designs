<!DOCTYPE html>
<html>
    <head>
        <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
      />
        <style>

            :root {
                --col: rgba(255,0,0,0.4);
                --oldCol: rgba(255,0,0,0.4);      
            }

            body {
                margin: 0;
                touch-action: none;
                background-color: var(--col)
            }

            #rnb {
                width: 100%;
                height: 100vh;
                background-color: var(--col);
                
            }

            @keyframes gradual{
                from {background-color: var(--oldCol)}
                to {background-color: var(--col);}
            }

            .jedem{
                animation: gradual 500ms forwards;
            }
               

        </style>
    </head>
    
    <body>
        <div id="rnb" class="animated">
 
 
        </div>
       

        <script type="text/javascript">
            
            var rnb = document.getElementById('rnb')
            var isPaused = false
            var randArr = [] 
            var randomRGB = "rgba(255,0,0,0.4)"
            document.documentElement.style.setProperty('--oldCol', randomRGB);
            
            rnb.addEventListener('pointermove', e => {
                e.preventDefault();
                
                if (!isPaused){

                    isPaused = true
                                                      
                    for (i=0; i<3; i++) {randArr[i] = Math.floor(Math.random()*255)}                      
                    document.documentElement.style.setProperty('--oldCol', randomRGB);                     
                    randomRGB = "rgba(" + randArr[0] + "," + randArr[1] + "," + randArr[2] + "," + "0.4)"
                    document.documentElement.style.setProperty('--col', randomRGB);

                    rnb.classList.add('jedem')
                    document.body.classList.add('jedem')
        
                    
                    setTimeout(()=>{
                        
                        rnb.classList.remove('jedem')
                        document.body.classList.remove('jedem')                       
                        isPaused = false
                        
                    }, 500)
                    
                }
                                                                  
             
   
                })


        </script>

    </body>